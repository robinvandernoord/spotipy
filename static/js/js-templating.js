"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};// source: https://github.com/codepb/jquery-template/
(function(a){"use strict";function b(b,c,h){var i,l,m,n=this;return(c=c||{},m=a.extend(!0,{// These are the defaults.
async:!0,overwriteCache:!1,complete:null,success:null,error:function b(){a(this).each(function(){a(this).html(m.errorMessage)})},errorMessage:"There was an error loading the template.",paged:!1,pageNo:1,elemPerPage:10,append:!1,prepend:!1,beforeInsert:null,afterInsert:null,bindingOptions:{ignoreUndefined:!1,ignoreNull:!1,ignoreEmptyString:!1}},h),"array"===a.type(c))?(w=!0,e.call(this,b,c,m)):(d(b)||(i=a(b),"string"==typeof b&&0===b.indexOf("#")&&(m.isFile=!1)),l=m.isFile||"undefined"==typeof m.isFile&&("undefined"==typeof i||0===i.length),l&&!m.overwriteCache&&x[b]?g(b,n,c,m):l&&!m.overwriteCache&&x.hasOwnProperty(b)?f(b,n,c,m):l?j(b,n,c,m):k(i,n,c,m),this)}function c(b,c){c?z[b]=c:z=a.extend(z,b)}function d(a){return"string"==typeof a&&-1<a.indexOf("/")}function e(c,d,e){e=e||{};var f,g=this,h=d.length,i=e.prepend&&!e.append,j=0,k=0,l=!1,m=[];if(e.paged){var n=(e.pageNo-1)*e.elemPerPage;d=d.slice(n,n+e.elemPerPage),h=d.length}return e.append||e.prepend||g.html(""),f=a.extend({},e,{append:!e.prepend&&!0,complete:function a(){j++,(j===h||l)&&(l&&e&&"function"==typeof e.error&&e.error.call(g,m),e&&"function"==typeof e.complete&&e.complete())},success:function a(){k++,k===h&&e&&"function"==typeof e.success&&e.success()},error:function b(a){l=!0,m.push(a)}}),i&&d.reverse(),a(d).each(function(){if(b.call(g,c,this,f),l)return!1}),this}function f(a,b,c,d){y[a]?y[a].push({data:c,selection:b,settings:d}):y[a]=[{data:c,selection:b,settings:d}]}function g(a,b,c,d){var e=x[a].clone();l.call(b,e,c,d),"function"==typeof d.success&&d.success()}function h(){return new Date().getTime()}function i(a){return-1===a.indexOf("?")?a+"?_="+h():a+"&_="+h()}function j(b,c,d,f){x[b]=null;var g=b;f.overwriteCache&&(g=i(g)),a.ajax({url:g,async:f.async,success:function g(e){n(a(e),b,c,d,f)},error:function e(a){m(b,c,d,f,a)}})}function k(b,c,d,e){(b.is("script")||b.is("template"))&&(b=a.parseHTML(a.trim(b.html()))),l.call(c,b,d,e),"function"==typeof e.success&&e.success()}function l(b,c,d){var b=a("<div/>").append(b);o(b,c,d),a(this).each(function(){var e=b.children().clone(!0);a("select",e).each(function(c){a(this).val(a("select",b).eq(c).val())}),d.beforeInsert&&d.beforeInsert(e,c),d.append?a(this).append(e):d.prepend?a(this).prepend(e):a(this).html("").append(e),d.afterInsert&&d.afterInsert(e,c)}),"function"==typeof d.complete&&d.complete.call(a(this),c)}function m(b,c,d,e,f){var g;for("function"==typeof e.error&&e.error.call(c,f),a(y[b]).each(function(a,b){"function"==typeof b.settings.error&&b.settings.error.call(b.selection,f)}),"function"==typeof e.complete&&e.complete.call(c);y[b]&&(g=y[b].shift());)"function"==typeof g.settings.complete&&g.settings.complete.call(g.selection);"undefined"!=typeof y[b]&&0<y[b].length&&(y[b]=[])}function n(a,b,c,d,e){var f;for(x[b]=a.clone(),l.call(c,a,d,e),"function"==typeof e.success&&e.success.call(c);y[b]&&(f=y[b].shift());)l.call(f.selection,x[b].clone(),f.data,f.settings),"function"==typeof f.settings.success&&f.settings.success.call(f.selection)}function o(b,c,d){c=c||{},p("data-content",b,c,d,function(a,b){a.html(v(a,b,"content",d))}),p("data-content-append",b,c,d,function(a,b){a.append(v(a,b,"content",d))}),p("data-content-prepend",b,c,d,function(a,b){a.prepend(v(a,b,"content",d))}),p("data-content-text",b,c,d,function(a,b){a.text(v(a,b,"content",d))}),p("data-innerHTML",b,c,d,function(a,b){a.html(v(a,b,"content",d))}),p("data-src",b,c,d,function(a,b){a.attr("src",v(a,b,"src",d))},function(a){a.remove()}),p("data-href",b,c,d,function(a,b){a.attr("href",v(a,b,"href",d))},function(a){a.remove()}),p("data-alt",b,c,d,function(a,b){a.attr("alt",v(a,b,"alt",d))}),p("data-title",b,c,d,function(a,b){a.attr("title",v(a,b,"title",d))}),p("data-id",b,c,d,function(a,b){a.attr("id",v(a,b,"id",d))}),p("data-css",b,c,d,function(a,b){a.css(v(a,b,"css",d))}),p("data-class",b,c,d,function(a,b){a.addClass(v(a,b,"class",d))}),p("data-link",b,c,d,function(b,c){var e=a("<a/>");e.attr("href",v(b,c,"link",d)),e.html(b.html()),b.html(e)}),p("data-link-wrap",b,c,d,function(b,c){var e=a("<a/>");e.attr("href",v(b,c,"link-wrap",d)),b.wrap(e)}),p("data-options",b,c,d,function(b,c){a(c).each(function(){var c=a("<option/>");c.attr("value",this).text(this).appendTo(b)})}),s(b,c,d),p("data-value",b,c,d,function(a,b){a.val(v(a,b,"value",d))})}function p(b,c,d,e,f,g){a("["+b+"]",c).each(function(){var c=a(this),h=c.attr(b),i=u(d,h);return q(c,i,e)?void(c.removeAttr(b),"undefined"!=typeof i&&f?f(c,i):g&&g(c)):void c.remove()})}function q(a,b,c){var d=r(a,c);return!(d.ignoreUndefined&&"undefined"==typeof b)&&!(d.ignoreNull&&null===b)&&!(d.ignoreEmptyString&&""===b)}function r(b,c){var d={};// binding options passed as template attribute, i.e. 'data-binding-options'
// extend general bindingOptions with specific settings
return b instanceof jQuery&&b.attr("data-binding-options")?(d=a.parseJSON(b.attr("data-binding-options")),b.removeAttr("data-binding-options")):"object"===("undefined"==typeof b?"undefined":_typeof(b))&&b.hasOwnProperty("bindingOptions")&&(d=b.bindingOptions),a.extend({},c.bindingOptions,d)}function s(b,c,d){a("[data-template-bind]",b).each(function(){var b=a(this),e=a.parseJSON(b.attr("data-template-bind"));b.removeAttr("data-template-bind"),a(e).each(function(){var e;if(e="object"===_typeof(this.value)?u(c,this.value.data):u(c,this.value),this.attribute){if(!q(this,e,d))return void b.remove();switch(this.attribute){case"content":case"innerHTML":b.html(t(b,e,this));break;case"contentAppend":b.append(t(b,e,this));break;case"contentPrepend":b.prepend(t(b,e,this));break;case"contentText":b.text(t(b,e,this));break;case"options":var f=this;a(e).each(function(){var c=a("<option/>");c.attr("value",this[f.value.value]).text(t(b,this[f.value.content],f)).attr("selected",null!=_typeof(this[f.value.selected])&&this[f.value.selected]).appendTo(b)});break;default:b.attr(this.attribute,t(b,e,this));}}})})}function t(a,b,c,d){return c.formatter&&z[c.formatter]?function(d){return z[c.formatter].call(a,b,c.formatOptions,d)}(d):b}function u(a,b){if("this"===b)return a;for(var c,d=b.split("."),e=a;(c=d.shift())&&"undefined"!=typeof e&&null!=e;)e=e[c];return e}function v(b,c,d,e){var f,g=b.attr("data-format-target");if((g===d||!g&&"content"===d)&&(f=b.attr("data-format"),f&&"function"==typeof z[f])){var h=b.attr("data-format-options");return function(d){return z[f].call(b[0],c,h,a.extend({},d))}(e)}return c}var w,x={},y={},z={};c("nestedTemplateFormatter",function(b,c,d){if(c){"string"==typeof c&&"{"===c[0]&&(c=a.parseJSON(c));var e=c.parentElement||"div",f=c.template||c;//If a parent is specified, return it; otherwise only return the generated children.
return c.parentElement?a("<"+e+"/>").loadTemplate(f,b,d):a("<"+e+"/>").loadTemplate(f,b,d).children()}}),a.fn.loadTemplate=b,a.addTemplateFormatter=c})(jQuery);
//# sourceMappingURL=js-templating.js.map