/* global module */'use strict';/**
 * Class representing the API
 */var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},SpotifyWebApi=function(){var t=null,e=null,s=function(t,p){return t.abort=p,t},o=function(t,p){var o;if(null!==e){var a=e.defer();t(function(t){a.resolve(t)},function(t){a.reject(t)}),o=a.promise}else window.Promise&&(o=new window.Promise(t));return o?new s(o,p):null},a=function(){var t=Array.prototype.slice.call(arguments),p=t[0],e=t.slice(1);return p=p||{},e.forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(p[e]=t[e])}),p},r=function(t,p){var e='';for(var s in p)if(p.hasOwnProperty(s)){var o=p[s];e+=encodeURIComponent(s)+'='+encodeURIComponent(o)+'&'}return 0<e.length&&(e=e.substring(0,e.length-1),t=t+'?'+e),t},i=function(p,e){var s=new XMLHttpRequest,a=function(o,a){function i(t){o&&o(t),e&&e(null,t)}function y(){a&&a(s),e&&e(s,null)}var l=p.type||'GET';if(s.open(l,r(p.url,p.params)),t&&s.setRequestHeader('Authorization','Bearer '+t),p.contentType&&s.setRequestHeader('Content-Type',p.contentType),s.onreadystatechange=function(){if(4===s.readyState){var t=null;try{t=s.responseText?JSON.parse(s.responseText):''}catch(t){console.error(t)}200<=s.status&&300>s.status?i(t):y()}},'GET'===l)s.send(null);else{var c=null;p.postData&&(c='image/jpeg'===p.contentType?p.postData:JSON.stringify(p.postData)),s.send(c)}};return e?(a(),null):o(a,function(){s.abort()})},y=function(t,p,e,s){var o={},r=null;'object'===('undefined'==typeof p?'undefined':_typeof(p))?(o=p,r=e):'function'==typeof p&&(r=p);// options extend postData, if any. Otherwise they extend parameters sent in the url
var y=t.type||'GET';return'GET'!==y&&t.postData&&!s?t.postData=a(t.postData,o):t.params=a(t.params,o),i(t,r)},l=function(){};/**
   * Creates an instance of the wrapper
   * @constructor
   */return l.prototype={constructor:SpotifyWebApi},l.prototype.getGeneric=function(t,p){return y({url:t},p)},l.prototype.getMe=function(t,p){return y({url:'https://api.spotify.com/v1/me'},t,p)},l.prototype.getMySavedTracks=function(t,p){return y({url:'https://api.spotify.com/v1/me/tracks'},t,p)},l.prototype.addToMySavedTracks=function(t,p,e){return y({url:'https://api.spotify.com/v1/me/tracks',type:'PUT',postData:t},p,e)},l.prototype.removeFromMySavedTracks=function(t,p,e){return y({url:'https://api.spotify.com/v1/me/tracks',type:'DELETE',postData:t},p,e)},l.prototype.containsMySavedTracks=function(t,p,e){var s={url:'https://api.spotify.com/v1/me/tracks/contains',params:{ids:t.join(',')}};return y(s,p,e)},l.prototype.getMySavedAlbums=function(t,p){return y({url:'https://api.spotify.com/v1/me/albums'},t,p)},l.prototype.addToMySavedAlbums=function(t,p,e){return y({url:'https://api.spotify.com/v1/me/albums',type:'PUT',postData:t},p,e)},l.prototype.removeFromMySavedAlbums=function(t,p,e){return y({url:'https://api.spotify.com/v1/me/albums',type:'DELETE',postData:t},p,e)},l.prototype.containsMySavedAlbums=function(t,p,e){var s={url:'https://api.spotify.com/v1/me/albums/contains',params:{ids:t.join(',')}};return y(s,p,e)},l.prototype.getMyTopArtists=function(t,p){return y({url:'https://api.spotify.com/v1/me/top/artists'},t,p)},l.prototype.getMyTopTracks=function(t,p){return y({url:'https://api.spotify.com/v1/me/top/tracks'},t,p)},l.prototype.getMyRecentlyPlayedTracks=function(t,p){return y({url:'https://api.spotify.com/v1/me/player/recently-played'},t,p)},l.prototype.followUsers=function(t,p){var e={url:'https://api.spotify.com/v1/me/following/',type:'PUT',params:{ids:t.join(','),type:'user'}};return y(e,p)},l.prototype.followArtists=function(t,p){var e={url:'https://api.spotify.com/v1/me/following/',type:'PUT',params:{ids:t.join(','),type:'artist'}};return y(e,p)},l.prototype.followPlaylist=function(t,p,e){return y({url:'https://api.spotify.com/v1/playlists/'+t+'/followers',type:'PUT',postData:{}},p,e)},l.prototype.unfollowUsers=function(t,p){var e={url:'https://api.spotify.com/v1/me/following/',type:'DELETE',params:{ids:t.join(','),type:'user'}};return y(e,p)},l.prototype.unfollowArtists=function(t,p){var e={url:'https://api.spotify.com/v1/me/following/',type:'DELETE',params:{ids:t.join(','),type:'artist'}};return y(e,p)},l.prototype.unfollowPlaylist=function(t,p){return y({url:'https://api.spotify.com/v1/playlists/'+t+'/followers',type:'DELETE'},p)},l.prototype.isFollowingUsers=function(t,p){var e={url:'https://api.spotify.com/v1/me/following/contains',type:'GET',params:{ids:t.join(','),type:'user'}};return y(e,p)},l.prototype.isFollowingArtists=function(t,p){var e={url:'https://api.spotify.com/v1/me/following/contains',type:'GET',params:{ids:t.join(','),type:'artist'}};return y(e,p)},l.prototype.areFollowingPlaylist=function(t,p,e){var s={url:'https://api.spotify.com/v1/playlists/'+t+'/followers/contains',type:'GET',params:{ids:p.join(',')}};return y(s,e)},l.prototype.getFollowedArtists=function(t,p){return y({url:'https://api.spotify.com/v1/me/following',type:'GET',params:{type:'artist'}},t,p)},l.prototype.getUser=function(t,p,e){var s={url:'https://api.spotify.com/v1/users/'+encodeURIComponent(t)};return y(s,p,e)},l.prototype.getUserPlaylists=function(t,p,e){var s;return'string'==typeof t?s={url:'https://api.spotify.com/v1/users/'+encodeURIComponent(t)+'/playlists'}:(s={url:'https://api.spotify.com/v1/me/playlists'},e=p,p=t),y(s,p,e)},l.prototype.getPlaylist=function(t,p,e){return y({url:'https://api.spotify.com/v1/playlists/'+t},p,e)},l.prototype.getPlaylistTracks=function(t,p,e){return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks'},p,e)},l.prototype.createPlaylist=function(t,p,e){var s={url:'https://api.spotify.com/v1/users/'+encodeURIComponent(t)+'/playlists',type:'POST',postData:p};return y(s,p,e)},l.prototype.changePlaylistDetails=function(t,p,e){return y({url:'https://api.spotify.com/v1/playlists/'+t,type:'PUT',postData:p},p,e)},l.prototype.addTracksToPlaylist=function(t,p,e,s){return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks',type:'POST',postData:{uris:p}},e,s,!0)},l.prototype.replaceTracksInPlaylist=function(t,p,e){return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks',type:'PUT',postData:{uris:p}},{},e)},l.prototype.reorderTracksInPlaylist=function(t,p,e,s,o){/* eslint-enable camelcase */return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks',type:'PUT',postData:{range_start:p,insert_before:e}},s,o);/* eslint-disable camelcase */},l.prototype.removeTracksFromPlaylist=function(t,p,e){var s=p.map(function(t){return'string'==typeof t?{uri:t}:t});return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks',type:'DELETE',postData:{tracks:s}},{},e)},l.prototype.removeTracksFromPlaylistWithSnapshotId=function(t,p,e,s){var o=p.map(function(t){return'string'==typeof t?{uri:t}:t});/* eslint-disable camelcase *//* eslint-enable camelcase */return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks',type:'DELETE',postData:{tracks:o,snapshot_id:e}},{},s)},l.prototype.removeTracksFromPlaylistInPositions=function(t,p,e,s){/* eslint-enable camelcase */return y({url:'https://api.spotify.com/v1/playlists/'+t+'/tracks',type:'DELETE',postData:{positions:p,snapshot_id:e}},{},s);/* eslint-disable camelcase */},l.prototype.uploadCustomPlaylistCoverImage=function(t,p,e){var s={url:'https://api.spotify.com/v1/playlists/'+t+'/images',type:'PUT',postData:p.replace(/^data:image\/jpeg;base64,/,''),contentType:'image/jpeg'};return y(s,{},e)},l.prototype.getAlbum=function(t,p,e){return y({url:'https://api.spotify.com/v1/albums/'+t},p,e)},l.prototype.getAlbumTracks=function(t,p,e){return y({url:'https://api.spotify.com/v1/albums/'+t+'/tracks'},p,e)},l.prototype.getAlbums=function(t,p,e){var s={url:'https://api.spotify.com/v1/albums/',params:{ids:t.join(',')}};return y(s,p,e)},l.prototype.getTrack=function(t,p,e){return y({url:'https://api.spotify.com/v1/tracks/'+t},p,e)},l.prototype.getTracks=function(t,p,e){var s={url:'https://api.spotify.com/v1/tracks/',params:{ids:t.join(',')}};return y(s,p,e)},l.prototype.getArtist=function(t,p,e){return y({url:'https://api.spotify.com/v1/artists/'+t},p,e)},l.prototype.getArtists=function(t,p,e){var s={url:'https://api.spotify.com/v1/artists/',params:{ids:t.join(',')}};return y(s,p,e)},l.prototype.getArtistAlbums=function(t,p,e){return y({url:'https://api.spotify.com/v1/artists/'+t+'/albums'},p,e)},l.prototype.getArtistTopTracks=function(t,p,e,s){return y({url:'https://api.spotify.com/v1/artists/'+t+'/top-tracks',params:{country:p}},e,s)},l.prototype.getArtistRelatedArtists=function(t,p,e){return y({url:'https://api.spotify.com/v1/artists/'+t+'/related-artists'},p,e)},l.prototype.getFeaturedPlaylists=function(t,p){return y({url:'https://api.spotify.com/v1/browse/featured-playlists'},t,p)},l.prototype.getNewReleases=function(t,p){return y({url:'https://api.spotify.com/v1/browse/new-releases'},t,p)},l.prototype.getCategories=function(t,p){return y({url:'https://api.spotify.com/v1/browse/categories'},t,p)},l.prototype.getCategory=function(t,p,e){return y({url:'https://api.spotify.com/v1/browse/categories/'+t},p,e)},l.prototype.getCategoryPlaylists=function(t,p,e){return y({url:'https://api.spotify.com/v1/browse/categories/'+t+'/playlists'},p,e)},l.prototype.search=function(t,p,e,s){var o={url:'https://api.spotify.com/v1/search/',params:{q:t,type:p.join(',')}};return y(o,e,s)},l.prototype.searchAlbums=function(t,p,e){return this.search(t,['album'],p,e)},l.prototype.searchArtists=function(t,p,e){return this.search(t,['artist'],p,e)},l.prototype.searchTracks=function(t,p,e){return this.search(t,['track'],p,e)},l.prototype.searchPlaylists=function(t,p,e){return this.search(t,['playlist'],p,e)},l.prototype.getAudioFeaturesForTrack=function(t,p){return y({url:'https://api.spotify.com/v1/audio-features/'+t},{},p)},l.prototype.getAudioFeaturesForTracks=function(t,p){return y({url:'https://api.spotify.com/v1/audio-features',params:{ids:t}},{},p)},l.prototype.getAudioAnalysisForTrack=function(t,p){return y({url:'https://api.spotify.com/v1/audio-analysis/'+t},{},p)},l.prototype.getRecommendations=function(t,p){return y({url:'https://api.spotify.com/v1/recommendations'},t,p)},l.prototype.getAvailableGenreSeeds=function(t){return y({url:'https://api.spotify.com/v1/recommendations/available-genre-seeds'},{},t)},l.prototype.getMyDevices=function(t){return y({url:'https://api.spotify.com/v1/me/player/devices'},{},t)},l.prototype.getMyCurrentPlaybackState=function(t,p){return y({url:'https://api.spotify.com/v1/me/player'},t,p)},l.prototype.getMyCurrentPlayingTrack=function(t,p){return y({url:'https://api.spotify.com/v1/me/player/currently-playing'},t,p)},l.prototype.transferMyPlayback=function(t,p,e){var s=p||{};s.device_ids=t;return y({type:'PUT',url:'https://api.spotify.com/v1/me/player',postData:s},p,e)},l.prototype.play=function(t,p){t=t||{};var e='device_id'in t?{device_id:t.device_id}:null,s={};['context_uri','uris','offset','position_ms'].forEach(function(p){p in t&&(s[p]=t[p])});var o='function'==typeof t?t:{};// need to clear options so it doesn't add all of them to the query params
return y({type:'PUT',url:'https://api.spotify.com/v1/me/player/play',params:e,postData:s},o,p)},l.prototype.pause=function(t,p){t=t||{};var e='device_id'in t?{device_id:t.device_id}:null;return y({type:'PUT',url:'https://api.spotify.com/v1/me/player/pause',params:e},t,p)},l.prototype.skipToNext=function(t,p){t=t||{};var e='device_id'in t?{device_id:t.device_id}:null;return y({type:'POST',url:'https://api.spotify.com/v1/me/player/next',params:e},t,p)},l.prototype.skipToPrevious=function(t,p){t=t||{};var e='device_id'in t?{device_id:t.device_id}:null;return y({type:'POST',url:'https://api.spotify.com/v1/me/player/previous',params:e},t,p)},l.prototype.seek=function(t,p,e){p=p||{};var s={position_ms:t};'device_id'in p&&(s.device_id=p.device_id);return y({type:'PUT',url:'https://api.spotify.com/v1/me/player/seek',params:s},p,e)},l.prototype.setRepeat=function(t,p,e){p=p||{};var s={state:t};'device_id'in p&&(s.device_id=p.device_id);return y({type:'PUT',url:'https://api.spotify.com/v1/me/player/repeat',params:s},p,e)},l.prototype.setVolume=function(t,p,e){p=p||{};var s={volume_percent:t};'device_id'in p&&(s.device_id=p.device_id);return y({type:'PUT',url:'https://api.spotify.com/v1/me/player/volume',params:s},p,e)},l.prototype.setShuffle=function(t,p,e){p=p||{};var s={state:t};'device_id'in p&&(s.device_id=p.device_id);return y({type:'PUT',url:'https://api.spotify.com/v1/me/player/shuffle',params:s},p,e)},l.prototype.getAccessToken=function(){return t},l.prototype.setAccessToken=function(p){t=p},l.prototype.setPromiseImplementation=function(t){var s=!1;try{var o=new t(function(t){t()});'function'==typeof o.then&&'function'==typeof o.catch&&(s=!0)}catch(t){console.error(t)}if(s)e=t;else throw new Error('Unsupported implementation of Promises/A+')},l}();'object'===('undefined'==typeof module?'undefined':_typeof(module))&&'object'===_typeof(module.exports)&&(module.exports=SpotifyWebApi);
//# sourceMappingURL=spotify-web-api.js.map